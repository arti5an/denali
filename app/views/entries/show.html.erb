<% content_for :meta do %>
  <% cache "entry/meta/#{@entry.id}/#{@entry.updated_at.to_i}" do %>
    <title><%= raw "#{@entry.formatted_title} &middot; #{photoblog.name}" %></title>
    <link rel="canonical" href="<%= permalink @entry, { path_only: false } %>">
    <meta name="description" content="<%= @entry.body.blank? ? Sanitize.fragment(photoblog.description) : @entry.plain_body %>" />

    <meta property="og:title" content="<%= @entry.formatted_title %>" />
    <% if @entry.is_photo? %>
      <meta property="og:image" content="<%= @entry.photos.first.url(1200) %>" />
    <% end %>
    <meta property="og:description" content="<%= @entry.body.blank? ? Sanitize.fragment(photoblog.description) : @entry.plain_body %>" />
    <meta property="og:url" content="<%= permalink @entry, { path_only: false } %>" />
    <meta property="og:type" content="Article" />
    <meta property="og:site_name" content="<%= photoblog.name %>" />
    <meta property="og:locale" content="en_US" />

    <meta name="twitter:site" content="@gesteves">
    <meta name="twitter:creator" content="@gesteves">
    <meta name="twitter:title" content="<%= @entry.formatted_title %>">
    <meta name="twitter:url" content="<%= permalink @entry, { path_only: false } %>" />
    <% if @entry.is_text? %>
      <meta name="twitter:description" content="<%= @entry.plain_body %>">
      <meta name="twitter:card" content="summary">
    <% else %>
      <meta name="twitter:image" content="<%= @entry.photos.first.url(1200) %>">
      <meta name="twitter:card" content="photo" />
    <% end %>
  <% end %>
<% end %>


<%= render partial: 'entries/entry', object: @entry %>
